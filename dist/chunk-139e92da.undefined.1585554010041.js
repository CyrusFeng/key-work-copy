(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-139e92da"],{"4c5e":function(t,e,i){},"4cef":function(t,e,i){},5639:function(t,e,i){},8711:function(t,e,i){"use strict";var a=i("4c5e"),s=i.n(a);s.a},"892e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%"}},[i("div",{ref:"wrapper",staticClass:"scroll-wrap",class:{hideBtn:t.hideBtn}},[i("div",{staticClass:"list-wrap"},[i("div",{staticClass:"block field"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!1,"redstar-visible":!1}},[i("span",[t._v(t._s(t.detailObj.projectName))]),t.$showReward(t.detailObj.reward)&&3===t.detailObj.type?i("span",{staticClass:"reward"},[t._v("(+"+t._s(t.detailObj.reward)+"分)")]):t._e()]),i("span",{staticClass:"status"},[t._v(t._s(t.getLifeType(t.detailObj.type)))])],1),i("div",{staticClass:"content",class:{folded:!t.folded}},[i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[t._v("责任人")]),i("div",{staticClass:"right"},[t._v(t._s(t.$judgeUndefined(t.detailObj.chargerName)))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[t._v("工作来源")]),t.detailObj.sourceList&&t.detailObj.sourceList[0]?i("div",{staticClass:"right"},[t._v("\n                            "+t._s(t.detailObj.sourceList[0].name)+"\n                        ")]):t._e()]),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[t._v("启动时间")]),i("div",{staticClass:"right"},[t._v(t._s(t.detailObj.starttime&&t.detailObj.starttime.split(" ")[0]))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[t._v("完成时间")]),i("div",{staticClass:"right"},[t._v(t._s(t.detailObj.endtime&&t.detailObj.endtime.split(" ")[0]))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[t._v("单位")]),i("div",{staticClass:"right"},[t._v(t._s(t.$judgeUndefined(t.detailObj.unitName)))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[t._v("签发人")]),i("div",{staticClass:"right"},[t._v(t._s(t.$judgeUndefined(t.detailObj.signerName)))])]),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[t._v("协助人")]),i("div",{staticClass:"right"},[t._v(t._s(t.$judgeUndefined(t.detailObj.helperName)))])])]),i("div",{staticClass:"bottom"},[i("div",{on:{click:function(e){t.folded=!t.folded}}},[t.folded?i("p",[i("span",[t._v("展开")]),i("i",{staticClass:"icon"})]):i("p",{staticClass:"unfolded"},[i("span",[t._v("收起")]),i("i",{staticClass:"icon"})])])])]),i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("现状及问题")])],1),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(t.detailObj.problem||"暂无现状及问题"))])])]),i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("实施方法")])],1),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(t.detailObj.ways||"暂无实施方法"))])])]),i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("预期目标")])],1),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(t.detailObj.aim||"暂无预期目标"))])])]),2===t.detailObj.type?i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("变更内容")])],1),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(t.change_info_string||"暂无变更内容"))])])]):t._e(),2===t.detailObj.type?i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("变更原因")])],1),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(t.detailObj.change_reason||"暂无变更原因"))])])]):t._e(),3===t.detailObj.type&&1===t.detailObj.done_type?i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("div",[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("完结申请")])],1),i("span",[t._v("完成")])]),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(t.detailObj.done_info||"暂无完结说明"))])])]):t._e(),3===t.detailObj.type&&0===t.detailObj.done_type?i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("div",[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("完结申请")])],1),i("span",[t._v("未完成")])]),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v("任务现状："+t._s(t.detailObj.done_going||"暂无任务现状"))]),i("p",{staticClass:"des"},[t._v("完结原因："+t._s(t.detailObj.done_reason||"暂无完结原因"))])])]):t._e(),4===t.detailObj.type?i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("废止原因")])],1),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(2===t.detailObj.cancel_type?"客观原因：":"主观原因：")+t._s(t.detailObj.cancel_reason||"暂无废止原因"))])])]):t._e(),5===t.detailObj.type?i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!0,"redstar-visible":!1}},[t._v("反馈信息")])],1),i("div",{staticClass:"des-wrap"},[i("p",{staticClass:"des"},[t._v(t._s(t.detailObj.reply_info||"暂无反馈信息"))])])]):t._e(),i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!1,"redstar-visible":!1}},[t._v("审批信息")])],1),i("div",{staticClass:"des-wrap"},[i("div",{staticClass:"timeline"},[i("div",{staticClass:"item-wrap"},t._l(t.detailObj.lifePointList,function(e,a){return i("div",{staticClass:"item"},[i("div",{staticClass:"top"},[i("span",{staticClass:"status"},[t._v(t._s(e.approverName))]),i("span",{staticClass:"date"},[t._v(t._s(t.judgePointStatus(t.detailObj.lifePointList,a)||t.getPointStatus(e.state)))])]),i("div",{staticClass:"content-wrap"},[i("span",[t._v(t._s(e.info))])]),i("div",{staticClass:"bottom"},[i("div",{staticClass:"charger"},[i("span",[t._v(t._s(e.approveTime))])])])])}),0)])])]),t.showRate?i("div",{staticClass:"rate-wrap"},[t._m(0),i("Rate",{attrs:{size:35},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}}),i("p",[t._v("此项工作结果成效卓越，超出预期，特给予加分奖励！")])],1):t._e(),t.canWrite&&4!==t.$store.getters.currentRole&&2!==t.$store.getters.currentRole?i("div",{staticClass:"block approver"},[i("div",{staticClass:"title-wrap"},[i("div",{staticClass:"left"},[i("field-title",{attrs:{"blueline-visible":!1,"redstar-visible":!1}},[t._v("审批信息")])],1),1===t.$store.getters.currentRole&&2===t.detailObj.state?i("div",{staticClass:"right",on:{click:function(e){t.visible=!0}}},[i("span",[t._v("协办")])]):t._e()]),i("div",{staticClass:"radio"},[i("c-radio",{attrs:{options:t.options},on:{"value-change":function(e){return t.radioOnChange(e)}}})],1),i("div",{staticClass:"text"},[i("c-textarea",{attrs:{"default-value":"",remark:"",tips:"点击输入相关说明……………."},on:{"update:inputValue":function(e){t.info=e}}})],1)]):t._e(),t.$showReward(t.detailObj.reward)&&3===t.detailObj.type&&3===t.detailObj.state?i("div",{staticClass:"rate-wrap"},[t._m(1),i("Rate",{attrs:{size:35,"read-only":!0},model:{value:t.detailObj.reward,callback:function(e){t.$set(t.detailObj,"reward",e)},expression:"detailObj.reward"}}),i("p",[t._v("此项工作结果成效卓越，超出预期，特给予加分奖励！")])],1):t._e()])]),t.canWrite&&4!==t.$store.getters.currentRole&&2!==t.$store.getters.currentRole?i("div",{staticClass:"button-wrap"},[i("div",{staticClass:"btn2",on:{click:t.onClickToApproval}},[i("span",[t._v("发送")])])]):t._e(),4!==t.$store.getters.currentRole&&2!==t.$store.getters.currentRole||!t.canSet?t._e():i("div",{staticClass:"button-wrap"},[i("div",{staticClass:"btn1",on:{click:t.onClickToRelocation}},[i("span",[t._v("重定位")])]),i("div",{staticClass:"btn2",on:{click:t.onClickToAbolish}},[i("span",[t._v("废止")])])]),i("image-panel",{attrs:{url:t.imageUrl,showImagePanel:t.showImagePanel},on:{"update:showImagePanel":function(e){t.showImagePanel=e},"update:show-image-panel":function(e){t.showImagePanel=e}}}),i("StatePage",{attrs:{success:t.success,tipVisible:t.tipVisible,tipFailedDesc:t.tipFailedDesc,"jump-to":t.path},on:{"update:tipVisible":function(e){t.tipVisible=e}}}),i("FullPageLoading",{attrs:{loading:t.loading}}),i("CoOperation",{attrs:{"detail-obj":t.detailObj,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}})],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("卓越奖励")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("卓越奖励")])])}],n=(i("28a5"),i("ac6a"),i("7f7f"),i("af0b")),r=i("6dcf"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{ref:"wrapper",staticClass:"componentWrap",staticStyle:{height:"100%"}},[i("div",{staticClass:"scroll-wrap",staticStyle:{height:"calc(100% - 0.45rem)",overflow:"hidden"}},[i("div",[i("div",{staticClass:"block"},[i("div",{staticClass:"title-wrap"},[i("field-title",{attrs:{"blueline-visible":!1,"redstar-visible":!1}},[t._v("协办批示")])],1),i("div",{staticClass:"text"},[i("c-textarea",{attrs:{"default-value":"",remark:"",tips:"请填写协办批示"},on:{"update:inputValue":function(e){t.des=e}}})],1)]),i("div",{staticClass:"block approver"},[i("div",{staticClass:"title-wrap"},[i("div",[i("field-title",{attrs:{"blueline-visible":!1,"redstar-visible":!1}},[t._v("选择协办人")])],1),i("i",{staticClass:"icon",on:{click:t.onClickToChooseApprover}})]),i("div",{staticClass:"des-wrap"},t._l(t.xiebanList,function(e){return i("div",{staticClass:"wrap"},[i("div",{staticClass:"left"},[e.avatarUrl?i("img",{attrs:{src:e.avatarUrl}}):t._e()]),i("div",{staticClass:"right"},[i("span",[t._v(t._s(e.name))])])])}),0)])])]),i("div",{staticClass:"button-wrap"},[i("div",{staticClass:"btn1 btn",on:{click:t.onClickToSave}},[i("span",[t._v("发送")])]),i("div",{staticClass:"btn2 btn",on:{click:t.goBack}},[i("span",[t._v("返回")])])]),i("FullPageLoading",{attrs:{loading:t.loading}}),i("FullPageLoading",{attrs:{loading:t.loading1}}),i("Validator",{attrs:{source:t.source,validatorVisible:t.validatorVisible},on:{"update:validatorVisible":function(e){t.validatorVisible=e}}})],1):t._e()},o=[],c=i("bc3a"),d=i.n(c),f=i("4328"),h=i.n(f),p={name:"CoOperation",data:function(){return{des:"",loading:!1,loading1:!1,approverName:"",approverAvatarUrl:"",approverID:"",scroll:null,success:!1,source:{},validatorVisible:!1,taskLifeList:[],chargerID:"",chargerName:"",chargerAvatarUrl:"",chairmanId:"",chairmanName:"",chairmanAvatarUrl:"",xiebanList:[],pointCount:0,lifePointList:[]}},props:{detailObj:{type:Object},visible:{type:Boolean,default:!1}},watch:{detailObj:function(){console.log("this.detailObj.lifePointList",this.detailObj.lifePointList);for(var t=0;t<this.detailObj.lifePointList.length;t++){var e=this.detailObj.lifePointList[t];if(1===e.state&&e.approverID===this.$store.getters.openID){this.pointCount=t,console.log("inner count",this.pointCount);break}}console.log("count",this.pointCount)},visible:{handler:function(){this.$initScroll(this.scroll,this.$refs.wrapper)},immediate:!0}},mounted:function(){var t=this;this.xiebanList=[],this.des="",this.$getChairMan().then(function(e){t.chairmanId=e.data.result,console.log(t.chairmanId),t.$getPersonInfoByOpenID(t.chairmanId).then(function(e){var i=e.data.result.data[0];t.chairmanName=i.name,t.chairmanAvatarUrl=i.photoUrl,t.loading=!1}).catch(function(){alert("获取主席姓名失败，请重试")})}).catch(function(){alert("获取主席ID失败，请重试")})},methods:{onClickToChooseApprover:function(){console.log("_this.detailObj.lifePointListLength",this.detailObj.lifePointListLength);var t=this;qing.call("selectPersons",{isMulti:!0,success:function(e){t.lifePointList=[],t.xiebanList=e.data.persons,e.data.persons.forEach(function(e,i){var a={};a.approverID=e.openId,a.approverName=e.name,a.approverAvatarUrl=e.avatarUrl,a.index=i+1,a.parentID=t.detailObj.id,a.type=2,t.lifePointList.push(a)});var i={};i.approverID=t.chairmanId,i.approverName=t.chairmanName,i.approverAvatarUrl=t.chairmanAvatarUrl,i.index=e.data.persons.length+1,i.parentID=t.detailObj.id,i.type=1,t.lifePointList.push(i)}})},onClickToSave:function(){var t=this;if(this.xiebanList<=0)alert("未选择协办人");else{if(!this.des){var e=confirm("您未填写协办意见，确定要提交协办吗？");if(!e)return}this.loading=!0;var i=this.$url+"/taskSystem/task/addPoint";d()({method:"post",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify(this.lifePointList),index:this.detailObj.lifePointListLength})}).then(function(e){t.loading=!1,t.loading1=!0;var i=t.$url+"/taskSystem/task/audit";d()({method:"post",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify([{id:t.detailObj.lifePointList[t.pointCount].id,state:2,info:t.des}])})}).then(function(e){t.loading1=!1,!0===e.data.success?alert("协办成功"):alert("协办失败"),t.$emit("update:visible",!1),t.$router.push({name:"process-center-cm"})}).catch(function(){alert("添加协办意见失败")})}).catch(function(){t.loading=!1,alert("协办失败")})}},goBack:function(){this.$emit("update:visible",!1)}},beforeDestroy:function(){this.xiebanList=[],this.des=""}},u=p,v=(i("8711"),i("2877")),g=Object(v["a"])(u,l,o,!1,null,"3acc313e",null),b=g.exports,m=(i("1fba"),[{name:"工作详情"},{name:"生命周期"}]),_=[],C={name:"processDetail",components:{"tabs-for-details":n["a"],Rate:r["a"],CoOperation:b},data:function(){return{titlebar:m,detailSwiper:null,scroll:null,currentIndex:0,element:null,folded:!0,imageUrl:"",showImagePanel:!1,urlObj:_,options:[{label:"同意",value:2},{label:"不同意",value:3}],detailObj:{},isAgree:2,info:"",state:"",canWrite:!1,canSet:!1,loading:!1,tipVisible:!1,success:!1,change_info:{},change_info_string:"",path:"",val:0,lifePointList:[],tipFailedDesc:"",visible:!1}},computed:{showRate:function(){return console.log("!!!!!!!!!!!!!!!!!!!"),console.log(this.$store.getters.currentRole),console.log(this.detailObj.type),console.log(this.detailObj.done_type),console.log(this.detailObj.state),1===this.$store.getters.currentRole&&3===this.detailObj.type&&1===this.detailObj.done_type&&2===this.detailObj.state},hideBtn:function(){return 2===this.$store.getters.currentRole||4===this.$store.getters.currentRole?!this.canSet:!this.canWrite}},beforeRouteEnter:function(t,e,i){qing.call("setWebViewTitle",{title:"流程详情"}),i(function(t){if("processcenter"===e.name||"process-center-cm"===e.name||"process-center-clerk"===e.name||"process-center-source-admin"===e.name||"processCenterSourceAdmin"===e.name){var i=t.$route.params,a=i.detailObj,s=i.canWrite,n=i.canSet;t.canWrite=s,t.canSet=n,localStorage.setItem("process_detailObj_canWrite",t.canWrite),localStorage.setItem("process_detailObj_canSet",t.canSet);var r="http://rest.apizza.net/mock/21c5cf3ed4022de252a80d8e8366c6f7/getList",l={life_id:JSON.parse(a).id},o=[];o.push(l);var c={page:1,pageAmount:10,queryTaskList:JSON.stringify(o)};d()({method:"post",url:r,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify(c)}).then(function(e){if(e.data.success){var i=e.data.result.data[0],a=[];if(i.taskLifeList.forEach(function(t){t.taskID=i.id,t.projectName=i.projectName,t.chargerName=i.chargerName,t.sourceList=i.sourceList,t.starttime=i.starttime,t.endtime=i.endtime,t.unitName=i.unitName,t.signerName=i.signerName,t.helperName=i.helperName,t.imgs=i.imgs,t.problem=i.problem,t.ways=i.ways,t.aim=i.aim,t.taskState=i.state,t.reward=i.reward,i.taskLifeList&&i.taskLifeList.length>0&&(t.lifePointListLength=i.taskLifeList[0].lifePointList.length);var e=0;i.taskLifeList.forEach(function(t){2===t.type&&(e+=1)}),t.changeTimes=e,a.push(t)}),t.detailObj=a[0],t.$store.commit("setProcessDetailObj",t.detailObj),t.detailObj.imgs&&t.detailObj.imgs.length>0&&(t.urlObj=[],t.detailObj.imgs.split(",").forEach(function(e){t.urlObj.push({url:e})})),t.detailObj.change_info){var s,n,r,l,o;if("string"===typeof t.detailObj.change_info?t.change_info=JSON.parse(t.detailObj.change_info):t.change_info=t.detailObj.change_info,t.change_info.after.endtime!==t.change_info.before.endtime&&(s="预计完成时间：由".concat(t.change_info.before.endtime.split(" ")[0],"变更为").concat(t.change_info.after.endtime.split(" ")[0],"\r\n"),t.change_info_string+=s),t.change_info.after.unitName!==t.change_info.before.unitName&&(n="单位名称：由".concat(t.change_info.before.unitName,"变更为").concat(t.change_info.after.unitName?t.change_info.after.unitName:"' '","\r\n"),t.change_info_string+=n),t.change_info.after.chargerName!==t.change_info.before.chargerName&&(r="责任人：由".concat(t.change_info.before.chargerName,"变更为").concat(t.change_info.after.chargerName?t.change_info.after.chargerName:"' '","\r\n"),t.change_info_string+=r),t.change_info.after.helperName!==t.change_info.before.helperName){var c=t.change_info.before.helperName;c=void 0===c||null===c||"undefined"===c||"null"===c?"未设置":t.change_info.before.helperName,l="协助人：由".concat(c,"变更为").concat(t.change_info.after.helperName?t.change_info.after.helperName:"' '","\r\n"),t.change_info_string+=l}if(t.change_info.after.aim!==t.change_info.before.aim){var d=t.change_info.before.aim;d=void 0===d||null===d||"undefined"===d||"null"===d?"未设置":t.change_info.before.aim,o="预计完成目标：由".concat(d,"变更为").concat(t.change_info.after.aim?t.change_info.after.aim:"' '","\r\n"),t.change_info_string+=o}}t.pointCount=0,console.log("this.detailObj.lifePointList",t.detailObj.lifePointList);for(var f=0;f<t.detailObj.lifePointList.length;f++){var h=t.detailObj.lifePointList[f];if(1===h.state&&h.approverID===t.$store.getters.openID){t.pointCount=f,console.log("inner count",t.pointCount);break}}console.log("count",t.pointCount)}else alert("获取流程中心详情失败")}).catch(function(t){alert("接口错误")})}else if(t.detailObj=t.$store.getters.processDetailObj,t.canWrite=localStorage.getItem("process_detailObj_canWrite"),t.canSet=localStorage.getItem("process_detailObj_canSet"),t.detailObj.imgs&&t.detailObj.imgs.length>0&&(t.urlObj=[],t.detailObj.imgs.split(",").forEach(function(e){t.urlObj.push({url:e})})),t.detailObj.change_info){var f,p,u,v,g;if("string"===typeof t.detailObj.change_info?t.change_info=JSON.parse(t.detailObj.change_info):t.change_info=t.detailObj.change_info,t.change_info.after.endtime!==t.change_info.before.endtime&&(f="预计完成时间：由".concat(t.change_info.before.endtime.split(" ")[0],"变更为").concat(t.change_info.after.endtime.split(" ")[0],"\r\n"),t.change_info_string+=f),t.change_info.after.unitName!==t.change_info.before.unitName&&(p="单位名称：由".concat(t.change_info.before.unitName,"变更为").concat(t.change_info.after.unitName?t.change_info.after.unitName:"' '","\r\n"),t.change_info_string+=p),t.change_info.after.chargerName!==t.change_info.before.chargerName&&(u="责任人：由".concat(t.change_info.before.chargerName,"变更为").concat(t.change_info.after.chargerName?t.change_info.after.chargerName:"' '","\r\n"),t.change_info_string+=u),t.change_info.after.helperName!==t.change_info.before.helperName){var b=t.change_info.before.helperName;b=void 0===b||null===b||"undefined"===b||"null"===b?"未设置":t.change_info.before.helperName,v="协助人：由".concat(b,"变更为").concat(t.change_info.after.helperName?t.change_info.after.helperName:"' '","\r\n"),t.change_info_string+=v}if(t.change_info.after.aim!==t.change_info.before.aim){var m=t.change_info.before.aim;m=void 0===m||null===m||"undefined"===m||"null"===m?"未设置":t.change_info.before.aim,g="预计完成目标：由".concat(m,"变更为").concat(t.change_info.after.aim?t.change_info.after.aim:"' '","\r\n"),t.change_info_string+=g}}})},mounted:function(){this.$initScroll(this.scroll,this.$refs.wrapper)},methods:{getCurrentIndex:function(t){this.currentIndex=t,this.detailSwiper.slideTo(this.currentIndex)},onClickImage:function(t){this.imageUrl=t,this.showImagePanel=!0},radioOnChange:function(t){this.isAgree=t,console.log(t)},onClickToChooseApprover:function(){console.log("_this.detailObj.lifePointListLength",this.detailObj.lifePointListLength);var t=this;qing.call("selectPersons",{isMulti:!0,success:function(e){e.data.persons.forEach(function(e,i){var a={};a.approverID=e.openId,a.approverName=e.name,a.approverAvatarUrl=e.avatarUrl,a.index=i+1,a.parentID=t.detailObj.id,t.lifePointList.push(a)}),t.loading=!0;var i=t.$url+"/taskSystem/task/addPoint";d()({method:"post",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify(t.lifePointList),index:t.detailObj.lifePointListLength})}).then(function(e){t.path="process-center-cm",t.loading=!1,t.tipVisible=!0,!0===e.data.success?t.success=!0:(t.success=!1,t.tipFailedDesc=e.data.outerMessage)})}})},onClickToApproval:function(){var t=this;if(1===this.$store.getters.currentRole?this.path="process-center-cm":3===this.$store.getters.currentRole?this.path="process-center-clerk":this.path="processcenter",this.loading=!0,this.val){var e=this.$url+"/taskSystem/task/reward";d()({method:"post",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify([{id:this.detailObj.taskID,reward:this.val}])})}).then(function(e){if(console.log(),!0===e.data.success){var i=t.$url+"/taskSystem/task/audit";d()({method:"post",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify([{id:t.detailObj.lifePointList[t.pointCount].id,state:t.isAgree,info:t.info}])})}).then(function(e){t.loading=!1,t.tipVisible=!0,!0===e.data.success?t.success=!0:t.success=!1})}else t.success=!1})}else{var i=this.$url+"/taskSystem/task/audit";d()({method:"post",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify([{id:this.detailObj.lifePointList[this.pointCount].id,state:this.isAgree,info:this.info}])})}).then(function(e){t.loading=!1,t.tipVisible=!0,!0===e.data.success?t.success=!0:t.success=!1})}},onClickToRelocation:function(){var t=this;qing.call("selectPersons",{isMulti:!1,success:function(e){t.newApproverID=e.data.persons[0].openId,t.newApproverName=e.data.persons[0].name,t.newApproverAvatarUrl=e.data.persons[0].avatarUrl,t.loading=!0;var i=t.$url+"/taskSystem/task/changeApproverID";d()({method:"post",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({approverID:t.newApproverID,approverName:t.newApproverName,approverAvatarUrl:t.newApproverAvatarUrl,pointID:t.detailObj.lifePointList[t.detailObj.lifePointList.length-1].id})}).then(function(e){t.path="process-center-source-admin",t.loading=!1,t.tipVisible=!0,!0===e.data.success?(t.success=!0,t.tongzhi(t.newApproverID)):t.success=!1})}})},tongzhi:function(t){var e=this.$url+"/taskSystem/msg/sendMsg",i={openID:[t],msg:"您有1条重点工作[".concat(this.getLifeType(this.detailObj.type),"]流程待审批，请及时处理")};d()({method:"post",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify(i,{arrayFormat:"brackets"})}).then(function(t){}).catch(function(){})},onClickToAbolish:function(){var t=confirm("确定要废止这条流程吗?");t&&this.beSureToAbolish()},beSureToAbolish:function(){var t=this,e=this.detailObj.id,i={lifeID:e},a=this.$url+"/taskSystem/task/deleteLife";d()({method:"post",url:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify(i)}).then(function(e){t.path="process-center-source-admin",t.loading=!1,t.tipVisible=!0,!0===e.data.success?t.success=!0:t.success=!1})},audit:function(){var t=this.$url+"/taskSystem/task/audit";return d()({method:"post",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify([{id:this.detailObj.lifePointList[0].id,state:this.isAgree,info:this.info}])})})},rate:function(){var t=this.$url+"/taskSystem/task/reward";return d()({method:"post",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify([{id:this.detailObj.taskID,reward:this.val}])})})},onClickToReject:function(){var t=this,e=this.$url+"/taskSystem/task/audit";this.loading=!0,d()({method:"post",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:h.a.stringify({jsonStr:JSON.stringify([{id:this.detailObj.lifePointList[0].id,state:4,info:this.info}])})}).then(function(e){t.loading=!1,t.tipVisible=!0,1==e.data.success?t.success=!0:t.success=!1})},getTaskStatus:function(t){switch(t){case 0:this.state="暂存";break;case 1:this.state="新增";break;case 2:this.state="进行中";break;case 3:this.state="已完成";break;case 4:this.state="已废止";break;default:this.state="";break}return this.state},getLifeStatus:function(t){var e="";switch(t){case 0:e="新增";break;case 1:e="退回";break;case 2:e="审批中";break;case 3:e="通过";break;case 4:e="未通过";break;default:e="";break}return e},getLifeType:function(t){var e="";switch(t){case 1:e="新增";break;case 2:e="变更";break;case 3:e="完结";break;case 4:e="废止";break;case 5:e="反馈";break;case 6:e="传阅";break;default:e="";break}return e},getPointStatus:function(t){var e="";switch(t){case 0:e="待审批";break;case 1:e="审批中";break;case 2:e="通过";break;case 3:e="未通过";break;case 4:e="驳回";break;default:e="";break}return e},judgePointStatus:function(t,e){return t&&t.length>0&&t[e+1]&&1===t[e].type&&2===t[e+1].type?"协办":""}}},w=C,j=(i("ede7"),Object(v["a"])(w,a,s,!1,null,"0660ce01",null));e["default"]=j.exports},af0b:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"tabTitleWrap",staticClass:"tab-title-wrap"},[i("div",{staticClass:"tab-title"},[t._l(t.titlebar,function(e,a){return i("div",{key:a,staticClass:"nav-item",class:{nav_active:a==t.currentIndex},on:{click:function(e){return e.stopPropagation(),t.changeIndex(a,e)}}},[i("span",{ref:"nav_item",refInFor:!0},[t._v(t._s(e.name))]),t.showNum?i("span",[t._v("("+t._s(6)+")")]):t._e()])}),i("span",{ref:"line",staticClass:"line"})],2)])},s=[],n=(i("c5f6"),{name:"tabs",data:function(){return{detailSwiper:null,lineWidth:0,wrapLeft:0}},props:{titlebar:{type:Array},showNum:{type:Boolean,default:!1},currentIndex:{type:Number,default:0},element:{type:Element}},mounted:function(){var t;this.lineWidth=this.$refs.line.clientWidth,t=this.$refs.nav_item[0];var e=this.$refs.tabTitleWrap;this.wrapLeft=e.getBoundingClientRect().left,this.$refs.line.style.visibility="visible";var i=t.getBoundingClientRect(),a=i.width,s=i.left;console.log("left",s),console.log("this.wrapLeft",this.wrapLeft),this.$refs.line.style.left=s+a/2-this.lineWidth/2-this.wrapLeft+"px",this.$refs.line.style.transition="all 350ms"},methods:{changeIndex:function(t,e){this.$emit("update:currentIndex",t)},lineMove:function(t,e){var i=this.$refs.nav_item[t];console.log("currentDom",i);var a=i.getBoundingClientRect(),s=a.width,n=a.left;console.log("left",n),console.log("this.wrapLeft",this.wrapLeft),this.wrapLeft===document.documentElement.clientWidth&&(this.wrapLeft=0),this.$refs.line.style.left=n+s/2-this.lineWidth/2-this.wrapLeft+"px",this.$refs.line.style.transition="all 350ms"}},watch:{currentIndex:function(){this.lineMove(this.currentIndex,this.element)}}}),r=n,l=(i("ea04"),i("2877")),o=Object(l["a"])(r,a,s,!1,null,"94bf4074",null);e["a"]=o.exports},ea04:function(t,e,i){"use strict";var a=i("5639"),s=i.n(a);s.a},ede7:function(t,e,i){"use strict";var a=i("4cef"),s=i.n(a);s.a}}]);