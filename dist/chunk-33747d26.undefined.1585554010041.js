(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33747d26"],{d911:function(t,e,a){},e763:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("header",[a("change-btn",{attrs:{titleData:t.btnTitle,currentIndex:t.btnCurrentIndex},on:{"update:currentIndex":function(e){return t.getCurrentIndex1(e)}}})],1),a("div",{staticClass:"swiper-container first-container swiper-no-swiping"},[a("div",{staticClass:"swiper-wrapper"},[a("div",{ref:"wrapper1",staticClass:"swiper-slide"},[a("div",{staticClass:"parent-tabwrap"},[a("c-tab",{attrs:{titlebar:t.titlebar1,currentIndex:t.tabCurrentIndex1,"show-num":!0},on:{"update:currentIndex":function(e){return t.getCurrentIndex2(e)}}})],1),a("div",{staticClass:"swiper-container second-container swiper-no-swiping"},[a("div",{staticClass:"swiper-wrapper"},[a("div",{staticClass:"swiper-slide"},[a("div",{ref:"wrapper1_1",staticClass:"list-wrap"},[a("ul",{staticClass:"task"},[t._l(t.list1,function(e){return a("router-link",{key:e.id,attrs:{tag:"li",to:{name:"processdetail",params:{detailObj:JSON.stringify(e),canWrite:!0}}}},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[t._v("\n                                                "+t._s(e.projectName)+"\n                                            ")]),a("div",{staticClass:"date"},[t._v(t._s(t.getLifeType(e.type)))])]),a("div",{staticClass:"middle"},[a("span",[t._v("责任人：")]),a("span",[t._v(t._s(e.chargerName))])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"tags"},[0===e.listState?a("p",[a("span",[t._v("新增")])]):t._e(),1===e.listState?a("p",[a("span",[t._v("退回")])]):t._e(),2===e.listState?a("p",[a("span",[t._v("审批中")])]):t._e(),3===e.listState?a("p",[a("span",[t._v("通过")])]):t._e(),4===e.listState?a("p",[a("span",[t._v("未通过")])]):t._e(),5===e.listState?a("p",[a("span",[t._v("关闭")])]):t._e()])])])}),t.showLoadingWrap1?a("div",[a("Loading",{attrs:{showloadingwrap:t.showLoadingWrap1,showloadingimg:t.showLoadingImg1}})],1):t._e()],2)])]),a("div",{staticClass:"swiper-slide"},[a("div",{ref:"wrapper1_2",staticClass:"list-wrap"},[a("ul",{staticClass:"task"},[t._l(t.list2,function(e){return a("router-link",{key:e.id,attrs:{tag:"li",to:{name:"processdetail",params:{detailObj:JSON.stringify(e),canWrite:!1}}}},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[t._v("\n                                                "+t._s(e.projectName)+"\n                                                "),t.$showReward(e.reward)&&3===e.type&&3===e.state?a("span",{staticClass:"reward"},[t._v("(+"+t._s(e.reward)+"分)")]):t._e()]),a("div",{staticClass:"date"},[t._v(t._s(t.getLifeType(e.type)))])]),a("div",{staticClass:"middle"},[a("span",[t._v("责任人：")]),a("span",[t._v(t._s(e.chargerName))])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"tags"},[0===e.listState?a("p",[a("span",[t._v("新增")])]):t._e(),1===e.listState?a("p",[a("span",[t._v("退回")])]):t._e(),2===e.listState?a("p",[a("span",[t._v("审批中")])]):t._e(),3===e.listState?a("p",[a("span",[t._v("通过")])]):t._e(),4===e.listState?a("p",[a("span",[t._v("未通过")])]):t._e(),5===e.listState?a("p",[a("span",[t._v("关闭")])]):t._e()])])])}),t.showLoadingWrap2?a("div",[a("Loading",{attrs:{showloadingwrap:t.showLoadingWrap2,showloadingimg:t.showLoadingImg2}})],1):t._e()],2)])])])])]),a("div",{ref:"wrapper2",staticClass:"swiper-slide"},[a("div",{staticClass:"parent-tabwrap"},[a("c-tab",{attrs:{titlebar:t.titlebar2,currentIndex:t.tabCurrentIndex2,"show-num":!0},on:{"update:currentIndex":function(e){return t.getCurrentIndex3(e)}}})],1),a("div",{staticClass:"swiper-container third-container"},[a("div",{staticClass:"swiper-wrapper"},[a("div",{staticClass:"swiper-slide"},[a("div",{ref:"wrapper2_1",staticClass:"list-wrap"},[a("ul",{staticClass:"task"},[t._l(t.list3,function(e){return a("router-link",{key:e.id,attrs:{tag:"li",to:{name:"processdetail",params:{detailObj:JSON.stringify(e),canWrite:!1}}}},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[t._v("\n                                                "+t._s(e.projectName)+"\n                                            ")]),a("div",{staticClass:"date"},[t._v(t._s(t.getLifeType(e.type)))])]),a("div",{staticClass:"middle"},[a("span",[t._v("责任人：")]),a("span",[t._v(t._s(e.chargerName))])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"tags"},[0===e.listState?a("p",[a("span",[t._v("新增")])]):t._e(),1===e.listState?a("p",[a("span",[t._v("退回")])]):t._e(),2===e.listState?a("p",[a("span",[t._v("审批中")])]):t._e(),3===e.listState?a("p",[a("span",[t._v("通过")])]):t._e(),4===e.listState?a("p",[a("span",[t._v("未通过")])]):t._e(),5===e.listState?a("p",[a("span",[t._v("关闭")])]):t._e()])])])}),t.showLoadingWrap3?a("div",[a("Loading",{attrs:{showloadingwrap:t.showLoadingWrap3,showloadingimg:t.showLoadingImg3}})],1):t._e()],2)])]),a("div",{staticClass:"swiper-slide"},[a("div",{ref:"wrapper2_2",staticClass:"list-wrap"},[a("ul",{staticClass:"task"},[t._l(t.list4,function(e){return a("router-link",{key:e.id,attrs:{tag:"li",to:{name:"processdetail",params:{detailObj:JSON.stringify(e),canWrite:!1}}}},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[t._v("\n                                                "+t._s(e.projectName)+"\n                                                "),t.$showReward(e.reward)&&3===e.type&&3===e.state?a("span",{staticClass:"reward"},[t._v("(+"+t._s(e.reward)+"分)")]):t._e()]),a("div",{staticClass:"date"},[t._v(t._s(t.getLifeType(e.type)))])]),a("div",{staticClass:"middle"},[a("span",[t._v("责任人：")]),a("span",[t._v(t._s(e.chargerName))])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"tags"},[0===e.listState?a("p",[a("span",[t._v("新增")])]):t._e(),1===e.listState?a("p",[a("span",[t._v("退回")])]):t._e(),2===e.listState?a("p",[a("span",[t._v("审批中")])]):t._e(),3===e.listState?a("p",[a("span",[t._v("通过")])]):t._e(),4===e.listState?a("p",[a("span",[t._v("未通过")])]):t._e(),5===e.listState?a("p",[a("span",[t._v("关闭")])]):t._e()])])])}),t.showLoadingWrap4?a("div",[a("Loading",{attrs:{showloadingwrap:t.showLoadingWrap4,showloadingimg:t.showLoadingImg4}})],1):t._e()],2)])])])])])])])])},i=[],r=(a("ac6a"),a("7f7f"),a("41d6")),n=a("bc3a"),o=a.n(n),d=a("4328"),p=a.n(d),l=(a("1fba"),[{name:"我审批的"},{name:"我负责的"}]),h=[{name:"待审批",num:0},{name:"已审批",num:0}],c=[{name:"审批中",num:0},{name:"已审批",num:0}],g={name:"process-center",components:{},data:function(){return{btnTitle:l,titlebar1:h,titlebar2:c,detailSwiper1:null,detailSwiper2:null,detailSwiper3:null,btnCurrentIndex:0,tabCurrentIndex1:0,tabCurrentIndex2:0,showLoadingWrap1:!1,showLoadingWrap2:!1,showLoadingWrap3:!1,showLoadingWrap4:!1,showLoadingImg1:!1,showLoadingImg2:!1,showLoadingImg3:!1,showLoadingImg4:!1,list1:[],list2:[],list3:[],list4:[],scroll1:null,scroll2:null,scroll3:null,scroll4:null,openId:"",process_taskType:"",process_taskStatus:"",charge:{},approve:{}}},watch:{btnCurrentIndex:function(){this.$store.commit("setCurrentBtnIndex",this.btnCurrentIndex),1===this.btnCurrentIndex&&0===this.tabCurrentIndex2?this.showLoadingWrap3||0!==this.list3.length||this.loadData(this.$store.getters.openID,"charge","审批中",1,10):1===this.btnCurrentIndex&&1===this.tabCurrentIndex2&&(this.showLoadingWrap4||0!==this.list4.length||this.loadData(this.$store.getters.openID,"charge","已审批",1,10)),0===this.btnCurrentIndex&&0===this.tabCurrentIndex1?this.showLoadingWrap1||0!==this.list1.length||this.loadData(this.$store.getters.openID,"approval","审批中",1,10):0===this.btnCurrentIndex&&1===this.tabCurrentIndex1&&(this.showLoadingWrap2||0!==this.list2.length||this.loadData(this.$store.getters.openID,"approval","已审批",1,10))},tabCurrentIndex1:function(){this.$store.commit("setCurrentTabIndex",this.tabCurrentIndex1),1===this.tabCurrentIndex1?this.showLoadingWrap2||0!==this.list2.length||this.loadData(this.$store.getters.openID,"approval","已审批",1,10):0===this.tabCurrentIndex1&&(this.showLoadingWrap1||0!==this.list1.length||this.loadData(this.$store.getters.openID,"approval","审批中",1,10))},tabCurrentIndex2:function(){this.$store.commit("setCurrentTabIndex",this.tabCurrentIndex2),1===this.tabCurrentIndex2?this.showLoadingWrap4||0!==this.list4.length||this.loadData(this.$store.getters.openID,"charge","已审批",1,10):0===this.tabCurrentIndex2&&(this.showLoadingWrap3||0!==this.list3.length||this.loadData(this.$store.getters.openID,"charge","审批中",1,10))}},beforeRouteEnter:function(t,e,a){qing.call("setWebViewTitle",{title:"流程中心"}),a(function(t){if("index"===e.name){var a=t.$route.params,s=a.process_taskType,i=a.process_taskStatus;t.process_taskType=s,t.process_taskStatus=i,console.log("process_taskType",s),"approval"===t.process_taskType?t.$store.commit("setCurrentBtnIndex",0):"charge"===t.process_taskType&&t.$store.commit("setCurrentBtnIndex",1),t.$store.commit("setCurrentTabIndex",0)}else t.btnCurrentIndex=t.$store.getters.currentBtnIndex,0===t.btnCurrentIndex?(t.process_taskType="approval",t.tabCurrentIndex1=t.$store.getters.currentTabIndex):(t.process_taskType="charge",t.tabCurrentIndex2=t.$store.getters.currentTabIndex),0===t.$store.getters.currentTabIndex?t.process_taskStatus="审批中":t.process_taskStatus="已审批";t.detailSwiper1=new r["a"](".first-container",{on:{slideChangeTransitionStart:function(){t.btnCurrentIndex=t.detailSwiper1.activeIndex}}}),t.detailSwiper2=new r["a"](".second-container",{on:{slideChangeTransitionStart:function(){t.tabCurrentIndex1=t.detailSwiper2.activeIndex,console.log(t.tabCurrentIndex1)}}}),t.detailSwiper3=new r["a"](".third-container",{on:{slideChangeTransitionStart:function(){t.tabCurrentIndex2=t.detailSwiper3.activeIndex}}}),t.detailSwiper1.slideTo(t.btnCurrentIndex),0===t.btnCurrentIndex?t.detailSwiper2.slideTo(t.tabCurrentIndex1):t.detailSwiper3.slideTo(t.tabCurrentIndex2);var n="http://rest.apizza.net/mock/21c5cf3ed4022de252a80d8e8366c6f7/getFlowAmount";o()({method:"post",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:p.a.stringify({jsonStr:JSON.stringify([{name:"checking",param:[{point_state:[1],point_approverID:t.$store.getters.openID}]},{name:"done",param:[{point_state:[2,3,4],point_approverID:t.$store.getters.openID}]}])})}).then(function(e){t.titlebar1[0].num=e.data.result.checking,t.titlebar1[1].num=e.data.result.done}),o()({method:"post",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:p.a.stringify({jsonStr:JSON.stringify([{name:"checking",param:[{life_state:2,chargerID:t.$store.getters.openID}]},{name:"done",param:[{life_state:3,chargerID:t.$store.getters.openID},{life_state:4,chargerID:t.$store.getters.openID}]}])})}).then(function(e){t.titlebar2[0].num=e.data.result.checking,t.titlebar2[1].num=e.data.result.done}),t.loadData(t.$store.state.openID,t.process_taskType,t.process_taskStatus,1,10)})},methods:{getCurrentIndex1:function(t){this.btnCurrentIndex=t,this.detailSwiper1.slideTo(t)},getCurrentIndex2:function(t){console.log(t),this.tabCurrentIndex2=0,this.tabCurrentIndex1=t,this.detailSwiper2.slideTo(t)},getCurrentIndex3:function(t){this.tabCurrentIndex1=0,this.tabCurrentIndex2=t,this.detailSwiper3.slideTo(t)},ajax:function(t,e,a,s,i,r){var n=this;switch(r){case 1:this.showLoadingWrap1=!0,this.showLoadingImg1=!0;break;case 2:this.showLoadingWrap2=!0,this.showLoadingImg2=!0;break;case 3:this.showLoadingWrap3=!0,this.showLoadingImg3=!0;break;case 4:this.showLoadingWrap4=!0,this.showLoadingImg4=!0;break;default:break}o()({method:"post",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:p.a.stringify(e)}).then(function(o){if(console.log(o.data),o.data.result.amount>0){switch(r){case 1:n.showLoadingWrap1=!1,n.showLoadingImg1=!1;break;case 2:n.showLoadingWrap2=!1,n.showLoadingImg2=!1;break;case 3:n.showLoadingWrap3=!1,n.showLoadingImg3=!1;break;case 4:n.showLoadingWrap4=!1,n.showLoadingImg4=!1;break;default:break}var d=o.data.result.data;d.forEach(function(t){t.taskLifeList.forEach(function(e){e.taskID=t.id,e.projectName=t.projectName,e.chargerName=t.chargerName,e.sourceList=t.sourceList,e.starttime=t.starttime,e.endtime=t.endtime,e.unitName=t.unitName,e.signerName=t.signerName,e.helperName=t.helperName,e.imgs=t.imgs,e.problem=t.problem,e.ways=t.ways,e.aim=t.aim,e.taskState=t.state,e.reward=t.reward,e.listState=t.taskLifeList[0].state;var s=0;t.taskLifeList.forEach(function(t){2===t.type&&(s+=1)}),e.changeTimes=s,a.push(e)})}),s&&(s.finishPullUp(),s.refresh()),n.$initScroll(s,i,function(s){e.page+=1,n.ajax(t,e,a,s,i,r)})}else switch(r){case 1:n.showLoadingWrap1=!0,n.showLoadingImg1=!1;break;case 2:n.showLoadingWrap2=!0,n.showLoadingImg2=!1;break;case 3:n.showLoadingWrap3=!0,n.showLoadingImg3=!1;break;case 4:n.showLoadingWrap4=!0,n.showLoadingImg4=!1;break;default:break}}).catch(function(t){switch(r){case 1:n.showLoadingWrap1=!0,n.showLoadingImg1=!1;break;case 2:n.showLoadingWrap2=!0,n.showLoadingImg2=!1;break;case 3:n.showLoadingWrap3=!0,n.showLoadingImg3=!1;break;case 4:n.showLoadingWrap4=!0,n.showLoadingImg4=!1;break;default:break}})},loadData:function(t,e,a,s,i){console.log(t,e,a,s,i);var r={point_state:void 0,chargerID:void 0,point_approverID:void 0},n="http://rest.apizza.net/mock/21c5cf3ed4022de252a80d8e8366c6f7/flowList";if("approval"===e){if(r.chargerID=void 0,r.point_approverID=t,"审批中"===a){r.point_state=[1],this.showLoadingWrap1=!0,this.showLoadingImg1=!0;var o=[];o.push(r);var d={page:s,pageAmount:i,queryTaskList:JSON.stringify(o)};this.ajax(n,d,this.list1,this.scroll1,this.$refs.wrapper1_1,1)}else if("已审批"===a){r.point_state=[2,3,4],this.showLoadingWrap2=!0,this.showLoadingImg2=!0;var p=[];p.push(r);var l={page:s,pageAmount:i,queryTaskList:JSON.stringify(p)};this.ajax(n,l,this.list2,this.scroll2,this.$refs.wrapper1_2,2)}}else if("charge"===e)if(r.chargerID=t,r.point_approverID=void 0,"审批中"===a){r.life_state=2,this.showLoadingWrap3=!0,this.showLoadingImg3=!0;var h=[];h.push(r);var c={page:s,pageAmount:i,queryTaskList:JSON.stringify(h)};this.ajax(n,c,this.list3,this.scroll3,this.$refs.wrapper2_1,3)}else if("已审批"===a){r.life_state=3,this.showLoadingWrap4=!0,this.showLoadingImg4=!0;var g=[],u={life_state:4,chargerID:t,point_approverID:void 0};g.push(r),g.push(u);var w={page:s,pageAmount:i,queryTaskList:JSON.stringify(g)};this.ajax(n,w,this.list4,this.scroll4,this.$refs.wrapper2_2,4)}},getLifeType:function(t){var e="";switch(t){case 1:e="新增";break;case 2:e="变更";break;case 3:e="完结";break;case 4:e="废止";break;case 5:e="反馈";break;case 6:e="传阅";break;default:e="";break}return e},judgeTarget:function(t){var e,a=t.lifePointList.length,s=t.lifePointList[t.lifePointList.length-1].state;if(2===s||3===s.state)e=s;else for(var i=0;i<a;i++)if(2!==t.lifePointList[i].state){e=t.lifePointList[i].state;break}return e}}},u=g,w=(a("f6a3"),a("2877")),m=Object(w["a"])(u,s,i,!1,null,"11066966",null);e["default"]=m.exports},f6a3:function(t,e,a){"use strict";var s=a("d911"),i=a.n(s);i.a}}]);