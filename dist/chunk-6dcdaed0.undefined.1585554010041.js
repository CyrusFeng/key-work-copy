(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dcdaed0"],{"454f":function(t,e,a){a("46a7");var s=a("584a").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},"46a7":function(t,e,a){var s=a("63b6");s(s.S+s.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"5d35":function(t,e,a){"use strict";var s=a("b513"),r=a.n(s);r.a},"85f2":function(t,e,a){t.exports=a("454f")},"8e6e":function(t,e,a){var s=a("5ca1"),r=a("990b"),i=a("6821"),n=a("11e9"),o=a("f1ae");s(s.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,s=i(t),c=n.f,l=r(s),d={},p=0;while(l.length>p)a=c(s,e=l[p++]),void 0!==a&&o(d,e,a);return d}})},"990b":function(t,e,a){var s=a("9093"),r=a("2621"),i=a("cb7c"),n=a("7726").Reflect;t.exports=n&&n.ownKeys||function(t){var e=s.f(i(t)),a=r.f;return a?e.concat(a(t)):e}},afdd:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"parent-tabwrap"},[a("c-tab",{attrs:{titlebar:t.titlebar1,currentIndex:t.tabCurrentIndex,"show-num":!0},on:{"update:currentIndex":function(e){return t.getCurrentIndex(e)}}})],1),a("div",{staticClass:"swiper-container first-container swiper-no-swiping"},[a("div",{staticClass:"swiper-wrapper"},[a("div",{staticClass:"swiper-slide"},[a("div",{ref:"wrapper1_1",staticClass:"list-wrap 111"},[a("ul",{staticClass:"task"},[t._l(t.list1,function(e){return a("router-link",{key:e.id,attrs:{tag:"li",to:{name:"processdetail",params:{detailObj:JSON.stringify(e),canWrite:!0,canSet:!0}}}},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[t._v(t._s(e.projectName))]),a("div",{staticClass:"date"},[t._v(t._s(t.getLifeType(e.type)))])]),a("div",{staticClass:"middle"},[a("span",[t._v("责任人：")]),a("span",[t._v(t._s(e.chargerName))]),a("span",[t._v(t._s(e.coOperation?"（协办中）":""))])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"tags"},[0===e.listState?a("p",[a("span",[t._v("新增")])]):t._e(),1===e.listState?a("p",[a("span",[t._v("退回")])]):t._e(),2===e.listState?a("p",[a("span",[t._v("审批中")])]):t._e(),3===e.listState?a("p",[a("span",[t._v("通过")])]):t._e(),4===e.listState?a("p",[a("span",[t._v("未通过")])]):t._e(),5===e.listState?a("p",[a("span",[t._v("关闭")])]):t._e()])])])}),a("Loading",{attrs:{showloadingwrap:t.showLoadingWrap1,showloadingimg:t.showLoadingImg1}})],2)])]),a("div",{staticClass:"swiper-slide"},[a("div",{ref:"wrapper1_2",staticClass:"list-wrap 222"},[a("ul",{staticClass:"task"},[t._l(t.list2,function(e){return a("router-link",{key:e.id,attrs:{tag:"li",to:{name:"processdetail",params:{detailObj:JSON.stringify(e),canWrite:!1,canSet:!1}}}},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[t._v("\n                                    "+t._s(e.projectName)+"\n                                    "),t.$showReward(e.reward)&&3===e.type&&3===e.state?a("span",{staticClass:"reward"},[t._v("(+"+t._s(e.reward)+"分)")]):t._e()]),a("div",{staticClass:"date"},[t._v(t._s(t.getLifeType(e.type)))])]),a("div",{staticClass:"middle"},[a("span",[t._v("责任人：")]),a("span",[t._v(t._s(e.chargerName))])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"tags"},[0===e.listState?a("p",[a("span",[t._v("新增")])]):t._e(),1===e.listState?a("p",[a("span",[t._v("退回")])]):t._e(),2===e.listState?a("p",[a("span",[t._v("审批中")])]):t._e(),3===e.listState?a("p",[a("span",[t._v("通过")])]):t._e(),4===e.listState?a("p",[a("span",[t._v("未通过")])]):t._e(),5===e.listState?a("p",[a("span",[t._v("关闭")])]):t._e()])])])}),a("Loading",{attrs:{showloadingwrap:t.showLoadingWrap2,showloadingimg:t.showLoadingImg2}})],2)])])])])])},r=[],i=(a("8e6e"),a("456d"),a("bd86")),n=(a("ac6a"),a("7f7f"),a("41d6")),o=a("bc3a"),c=a.n(o),l=a("4328"),d=a.n(l);a("1fba");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,s)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(a,!0).forEach(function(e){Object(i["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var h=[{name:"我负责的"},{name:"我审批的"}],f=[{name:"审批中",num:0},{name:"已审批",num:0}],g={name:"process-center-source-admin",components:{},data:function(){return{btnTitle:h,titlebar1:f,detailSwiper:null,tabCurrentIndex:0,showLoadingWrap1:!1,showLoadingWrap2:!1,showLoadingImg1:!1,showLoadingImg2:!1,list1:[],list2:[],scroll1:null,scroll2:null,openId:"",process_taskType:"",process_taskStatus:"",charge:{},approve:{},leaderArr:[]}},watch:{tabCurrentIndex:function(){console.log("this.tabCurrentIndex",this.tabCurrentIndex),localStorage.setItem("tabCurrentIndex",this.tabCurrentIndex),1===this.tabCurrentIndex?(console.log("!this.showLoadingWrap2 && this.list2.length === 0",!this.showLoadingWrap2&&0===this.list2.length),this.showLoadingWrap2||0!==this.list2.length||this.loadData(this.$store.state.openID,"charge","已审批",1,10)):0===this.tabCurrentIndex&&(this.showLoadingWrap1||0!==this.list1.length||this.loadData(this.$store.state.openID,"charge","审批中",1,10))}},beforeRouteEnter:function(t,e,a){qing.call("setWebViewTitle",{title:"流程中心"}),a(function(t){t.leaderArr=t.$store.getters.leaderArr,t.sourceArr=JSON.parse(t.$store.getters.sourceIDs),"index"===e.name||"chairmanIndex"===e.name?(t.tabCurrentIndex=0,void 0!==t.tabCurrentIndex&&localStorage.setItem("tabCurrentIndex",t.tabCurrentIndex)):t.tabCurrentIndex=localStorage.getItem("tabCurrentIndex"),t.detailSwiper=new n["a"](".first-container",{on:{slideChangeTransitionStart:function(){t.tabCurrentIndex=t.detailSwiper.activeIndex}}}),t.detailSwiper.slideTo(t.tabCurrentIndex);var a="http://rest.apizza.net/mock/21c5cf3ed4022de252a80d8e8366c6f7/getFlowAmount",s=t.createFlowNumParam();s.forEach(function(e){var a=e.param.length,s=t.$duplicate(e.param,t.sourceArr.length);t.sourceArr.forEach(function(t,e){s.forEach(function(r,i){i<(e+1)*a&&i>=e*a&&(r.sourceID=t,r=JSON.parse(JSON.stringify(r)),console.log(r),s[i]=r)})})}),c()({method:"post",url:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:d.a.stringify({jsonStr:JSON.stringify(s)})}).then(function(e){if(console.log(e.data),e.data.success){var a=e.data.result;t.titlebar1[0].num=a.checking,t.titlebar1[1].num=a.pass}else t.titlebar1[0].num=0,t.titlebar1[1].num=0}),t.loadData(t.$store.getters.openID,"","审批中",1,10)})},methods:{getCurrentIndex:function(t){console.log(t),this.tabCurrentIndex=t,this.detailSwiper.slideTo(t)},ajax:function(t,e,a,s,r,i){var n=this;switch(i){case 1:this.showLoadingWrap1=!0,this.showLoadingImg1=!0;break;case 2:this.showLoadingWrap2=!0,this.showLoadingImg2=!0;break;default:break}c()({method:"post",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:d.a.stringify(e)}).then(function(o){switch(i){case 1:n.showLoadingWrap1=!1,n.showLoadingImg1=!1;break;case 2:n.showLoadingWrap2=!1,n.showLoadingImg2=!1;break;default:break}var c=o.data.result.amount;if(c>0){var l=o.data.result.data;l.forEach(function(t){t.taskLifeList.forEach(function(e){e.taskID=t.id,e.projectName=t.projectName,e.chargerName=t.chargerName,e.sourceList=t.sourceList,e.starttime=t.starttime,e.endtime=t.endtime,e.unitName=t.unitName,e.signerName=t.signerName,e.helperName=t.helperName,e.imgs=t.imgs,e.problem=t.problem,e.ways=t.ways,e.aim=t.aim,e.taskState=t.state,e.reward=t.reward,e.listState=t.taskLifeList[0].state;var s=0;t.taskLifeList.forEach(function(t){2===t.type&&(s+=1)}),e.changeTimes=s,a.push(e)})}),s&&(s.finishPullUp(),s.refresh()),n.$initScroll(s,r,function(s){e.page+=1,n.ajax(t,e,a,s,r,i)})}else switch(i){case 1:n.showLoadingWrap1=!0,n.showLoadingImg1=!1;break;case 2:n.showLoadingWrap2=!0,n.showLoadingImg2=!1;break;default:break}}).catch(function(){switch(i){case 1:n.showLoadingWrap1=!0,n.showLoadingImg1=!1;break;case 2:n.showLoadingWrap2=!0,n.showLoadingImg2=!1;break;default:break}})},loadData:function(t,e,a,s,r){console.log(t,e,a,s,r);var i={life_state:void 0,sourceID:void 0},n="http://rest.apizza.net/mock/21c5cf3ed4022de252a80d8e8366c6f7/flowList";if("审批中"===a){i.life_state=2,this.showLoadingWrap1=!0,this.showLoadingImg1=!0;var o=[];this.sourceArr.length>0?this.sourceArr.forEach(function(t){var e=u({},i);e.sourceID=t,o.push(e)}):o.push(i);var c={page:s,pageAmount:r,queryTaskList:JSON.stringify(o)};this.ajax(n,c,this.list1,this.scroll1,this.$refs.wrapper1_1,1)}else if("已审批"===a){i.life_state=3;var l={life_state:4,sourceID:void 0};this.showLoadingWrap2=!0,this.showLoadingImg2=!0;var d=[];this.sourceArr.length>0?this.sourceArr.forEach(function(t){var e=u({},i),a=u({},l);e.sourceID=t,a.sourceID=t,d.push(e),d.push(a)}):(d.push(i),d.push(l));var p={page:s,pageAmount:r,queryTaskList:JSON.stringify(d)};this.ajax(n,p,this.list2,this.scroll2,this.$refs.wrapper1_2,2)}},getLifeType:function(t){var e="";switch(t){case 1:e="新增";break;case 2:e="变更";break;case 3:e="完结";break;case 4:e="废止";break;case 5:e="反馈";break;case 6:e="传阅";break;default:e="";break}return e},onClickToggle:function(t,e){t.stopPropagation(),e.folded=!e.folded},createFlowNumParam:function(){var t={life_state:2},e={life_state:3},a={life_state:4},s={name:"checking",param:[t]},r={name:"pass",param:[e,a]},i=[];return i=[s,r],i}}},w=g,m=(a("5d35"),a("2877")),b=Object(m["a"])(w,s,r,!1,null,"36e68589",null);e["default"]=b.exports},b513:function(t,e,a){},bd86:function(t,e,a){"use strict";a.d(e,"a",function(){return i});var s=a("85f2"),r=a.n(s);function i(t,e,a){return e in t?r()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}}}]);